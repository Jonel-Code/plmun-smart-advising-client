<div class="ui center aligned basic segment">
    <div class="ui center aligned icon huge header">
        <i class="circular table icon"></i>
        Curriculum Checklist
    </div>
    <div  class="ui horizontal divider"></div>
    <div style="overflow: auto; overflow-style: marquee-line; width: 100%;">
        <table mat-table [dataSource]="tableData" class="mat-elevation-z8 content-wrapper" matSort matSortActive="year"
               matSortDirection="asc">

            <ng-container matColumnDef="code">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Code</th>
                <td mat-cell *matCellDef="let sub"> {{sub.code | uppercase}}</td>
            </ng-container>

            <ng-container matColumnDef="title">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Title</th>
                <td mat-cell *matCellDef="let sub"> {{sub.title | titlecase}}</td>
            </ng-container>

            <ng-container matColumnDef="total_units">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Total Units</th>
                <td mat-cell *matCellDef="let sub"> {{sub.total_units}}</td>
            </ng-container>

            <ng-container matColumnDef="pre_req">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Pre requisite</th>
                <td mat-cell *matCellDef="let sub">
                    {{ (!(student_years.includes(sub.pre_req)) ? ((sub.pre_req === '') ? 'none': sub.pre_req ) : sub.pre_req
                    + ' year standing') | uppercase }}
                </td>
            </ng-container>

            <ng-container matColumnDef="year">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Year</th>
                <td mat-cell *matCellDef="let sub"> {{student_years[sub.year-1] + ' year' | uppercase }}</td>
            </ng-container>

            <ng-container matColumnDef="semester">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Semester</th>
                <td mat-cell *matCellDef="let sub"> {{sub.semester | uppercase}}</td>
            </ng-container>

            <ng-container matColumnDef="paths">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Path</th>
                <td mat-cell *matCellDef="let sub">
                    <button mat-raised-button color="primary"
                            (click)="get_paths_for_code(sub.code)"
                    >
                        <mat-icon>info</mat-icon>
                    </button>
                    <!--<ng-template #popOverTitle>-->
                    <!--<b>Subject Path</b>-->
                    <!--</ng-template>-->
                    <!--<ng-template #popOver class="popover-content">-->
                    <!--<h5>{{shownPaths.edges}}</h5>-->
                    <!--</ng-template>-->
                    <!---->
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"
                class="main-table-header-bg"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                [ngStyle]="{'background-color': isPassed(row.code) ? 'rgba(145, 235, 193, 0.44' : 'rgba(131, 158, 235, 0.44' }"></tr>
        </table>
    </div>
</div>
